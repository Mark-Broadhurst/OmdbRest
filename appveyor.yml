version: 1.0.{build}

image:
- Visual Studio 2017
- Ubuntu

branches:
  except:
    - gh-pages

skip_tags: true

assembly_info:
  patch: true
  file: AssemblyInfo.*
  assembly_version: "1.0.{build}"
  assembly_file_version: "{version}"
  assembly_informational_version: "{version}"

configuration: Release

test: off

install:
  - dotnet restore

after_build:
  - cd src
  - dotnet pack

build:
  parallel: true
  project: OmdbRest.sln
  
artifacts:
  - path: src\bin\$(configuration)
    name: bin
  - path: '**\*.nupkg'
    name: nuget
